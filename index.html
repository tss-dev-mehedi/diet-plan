<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Daily Fasting Schedule</title>
  <style>
    body {font-family: 'Noto Sans Bengali', sans-serif; background:#f7fafc; margin:0; padding:20px;}
    h1 {text-align:center; color:#0ea5a6;}
    .ticker {overflow:hidden; background:#d1fae5; color:#065f46; padding:12px; margin:15px 0;
             border-radius:8px; font-weight:600; text-align:center;}
    table {width:100%; border-collapse:collapse; margin-top:15px;}
    th, td {padding:12px; border:1px solid #ddd;}
    th {background:#0ea5a6; color:#fff;}
    tr:nth-child(even){background:#f1f5f9;}
    .badge {padding:5px 10px; border-radius:10px; font-size:12px; font-weight:600;}
    .on {background:#16a34a; color:#fff;}
    .late {background:#f59e0b; color:#111;}
    .miss {background:#ef4444; color:#fff;}
    .score {margin-top:15px; font-weight:700;}
  </style>
</head>
<body>
  <h1>⏰ Intermittent Fasting Checklist</h1>
  <div class="ticker" id="quoteBox">Loading quote...</div>

  <table id="scheduleTable">
    <thead>
      <tr><th>সময়</th><th>কাজ</th><th>স্ট্যাটাস</th><th>✔</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="score" id="scoreBox"></div>

<script>
const schedule = [
  {id:'sleep', time:'২৩:০০ – ০৫:৩০', start:'23:00', end:'05:30', task:'ঘুম'},
  {id:'fajr', time:'০৫:৩০ – ০৬:০০', start:'05:30', end:'06:00', task:'ফজর নামাজ'},
  {id:'fast', time:'০৬:০০ – ১২:০০', start:'06:00', end:'12:00', task:'উপোস'},
  {id:'lunch', time:'১২:৩০', start:'12:00', end:'13:30', task:'Lunch'},
  {id:'snack', time:'১৬:০০', start:'15:30', end:'16:30', task:'Snack'},
  {id:'exercise', time:'১৮:৩০ – ১৯:০০', start:'18:30', end:'19:00', task:'ব্যায়াম'},
  {id:'dinner', time:'১৯:৩০', start:'19:00', end:'20:30', task:'Dinner'}
];

const tbody = document.querySelector("#scheduleTable tbody");
schedule.forEach(item=>{
  let tr=document.createElement("tr");
  tr.innerHTML = <td>${item.time}</td>
                  <td>${item.task}</td>
                  <td id="status-${item.id}">❌</td>
                  <td><input type="checkbox" id="chk-${item.id}"></td>;
  tbody.appendChild(tr);
});

function checkStatus(){
  let total = schedule.length, done=0;
  schedule.forEach(item=>{
    const chk=document.getElementById("chk-"+item.id);
    const status=document.getElementById("status-"+item.id);
    if(chk.checked){
      done++;
      let now=new Date();
      let [sh,sm]=item.start.split(':'); let [eh,em]=item.end.split(':');
      let start=new Date(now); start.setHours(sh,sm);
      let end=new Date(now); end.setHours(eh,em);
      if(now>=start && now<=end) status.innerHTML=<span class='badge on'>On Time</span>;
      else status.innerHTML=<span class='badge late'>Late</span>;
    } else {
      status.innerHTML="❌";
    }
  });
  let scoreBox=document.getElementById("scoreBox");
  let percent = (done/total)*100;
  if(done==total) scoreBox.innerHTML=✅ স্কোর: Good (${done}/${total});
  else if(percent>=50) scoreBox.innerHTML=⚠️ স্কোর: Okay (${done}/${total});
  else scoreBox.innerHTML=❌ স্কোর: Weak (${done}/${total});
}
document.querySelectorAll("input[type=checkbox]").forEach(c=>c.addEventListener("change",checkStatus));

// Load daily motivational quote from quotes.json
fetch("quotes.json")
  .then(r=>r.json())
  .then(data=>{
    let today=new Date();
    let index=today.getDate() % data.length;
    let q=data[index];
    document.getElementById("quoteBox").innerText = "${q.quote}" — ${q.author};
  })
  .catch(err=>{
    document.getElementById("quoteBox").innerText="Stay strong, stay healthy!";
  });
</script>
</body>
</html>
